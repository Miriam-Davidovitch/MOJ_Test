<div class="form-container">
  <h3>הוספת בקשה חדשה</h3>
  
  <div *ngIf="successMessage" class="alert alert-success">
    {{ successMessage }}
  </div>

  <div *ngIf="errors['server']" class="alert alert-error">
    {{ errors['server'] }}
  </div>
  
  <form (ngSubmit)="onSubmit()" #requestForm="ngForm">
    <div class="form-group">
      <label for="requestorName">שם המבקש *</label>
      <input 
        type="text" 
        id="requestorName" 
        name="requestorName"
        [(ngModel)]="requestorName" 
        (blur)="onFieldBlur('requestorName')"
        (input)="onFieldChange('requestorName')"
        required 
        [class.error]="errors['requestorName']"
        class="form-control">
      <div *ngIf="errors['requestorName']" class="error-message">
        {{ errors['requestorName'] }}
      </div>
    </div>

    <div class="form-group">
      <label for="requestTopic">נושא הפניה</label>
      <input 
        type="text" 
        id="requestTopic" 
        name="requestTopic"
        [(ngModel)]="requestTopic" 
        (blur)="onFieldBlur('requestTopic')"
        (input)="onFieldChange('requestTopic')"
        [class.error]="errors['requestTopic']"
        class="form-control">
      <div *ngIf="errors['requestTopic']" class="error-message">
        {{ errors['requestTopic'] }}
      </div>
    </div>

    <div class="form-group">
      <label for="requestDescription">תוכן הפניה</label>
      <textarea 
        id="requestDescription" 
        name="requestDescription"
        [(ngModel)]="requestDescription" 
        (blur)="onFieldBlur('requestDescription')"
        (input)="onFieldChange('requestDescription')"
        rows="4" 
        [class.error]="errors['requestDescription']"
        class="form-control">
      </textarea>
      <div *ngIf="errors['requestDescription']" class="error-message">
        {{ errors['requestDescription'] }}
      </div>
      <div class="char-counter" [class.warning]="requestDescription.length > 200">
        {{ requestDescription.length }}/255 תווים
      </div>
    </div>

    <div class="form-actions">
      <button 
        type="submit" 
        [disabled]="isSubmitting"
        class="btn btn-primary">
        {{ isSubmitting ? 'שומר...' : 'שמירה' }}
      </button>
      <button 
        type="button" 
        (click)="onCancel()"
        class="btn btn-secondary">
        ביטול
      </button>
    </div>
  </form>
</div>